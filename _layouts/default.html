<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{% if page.title %}{{ page.title }} - {{ site.title }}{% else %}{{ site.title }}{% endif %}</title>
  <meta name="description" content="{% if page.description %}{{ page.description }}{% else %}{{ site.description }}{% endif %}">
  
  <!-- 引入Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  
  <!-- 引入Bootstrap CSS -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css">
  
  <!-- 引入默认主题样式文件 -->
  <link rel="stylesheet" href="{{ site.baseurl }}/assets/themes/theme-default.css" id="theme-style">
  
  <!-- 引入主样式文件 -->
  <link rel="stylesheet" href="{{ site.baseurl }}/assets/css/main.css">
  
  <!-- 网站图标 -->
  <link rel="icon" href="{{ site.baseurl }}/assets/images/favicon.ico" type="image/x-icon">
  
  <!-- SEO元标签 -->
  <meta name="author" content="{{ site.author.name }}">
  <meta name="keywords" content="企业网站,响应式设计,多主题,模板">
  
  <!-- 社交媒体元标签 -->
  <meta property="og:title" content="{% if page.title %}{{ page.title }} - {{ site.title }}{% else %}{{ site.title }}{% endif %}">
  <meta property="og:description" content="{% if page.description %}{{ page.description }}{% else %}{{ site.description }}{% endif %}">
  <meta property="og:type" content="website">
  <meta property="og:url" content="{{ page.url | absolute_url }}">
  
  <!-- 页面特定的CSS（如果有） -->
  {% if page.custom_css %}
    {% for css in page.custom_css %}
      <link rel="stylesheet" href="{{ site.baseurl }}/assets/css/{{ css }}">
    {% endfor %}
  {% endif %}
</head>
<body>
  <!-- 头部导航 -->
  {% include header.html %}
  
  <!-- 主要内容区域 -->
  <main>
    {{ content }}
  </main>
  
  <!-- 页脚 -->
  {% include footer.html %}
  
  <!-- 主题切换器 -->
  {% include theme-switcher.html %}
  
  <!-- 引入jQuery -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  
  <!-- 引入Bootstrap JS -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"></script>
  
  <!-- 页面脚本 -->
  <script>
    // 从Jekyll配置获取默认主题设置
    // 这个全局变量会被theme-switcher.js中的ThemeManager使用
    window.themeStyle = '{{ site.theme_style }}';
  </script>
  
  <!-- 引入主题切换器JS -->
  <script src="{{ site.baseurl }}/assets/js/theme-switcher.js"></script>
  
  <!-- 引入主JS文件 -->
  <script src="{{ site.baseurl }}/assets/js/main.js"></script>
  
  <!-- 页面特定的JS（如果有） -->
    {% if page.custom_js %}
      {% for js in page.custom_js %}
        <script src="{{ site.baseurl }}/assets/js/{{ js }}"></script>
      {% endfor %}
    {% endif %}
    
    <!-- 确保主题管理器正确初始化 -->
    <script>
      // 确保在DOM完全加载后初始化主题管理器
      document.addEventListener('DOMContentLoaded', function() {
        // 如果window.themeManager已存在，确保它被正确初始化
        if (window.themeManager && typeof window.themeManager.init === 'function') {
          // 重新初始化以应用正确的主题
          window.themeManager.init();
        }
      });
    </script>
  </body>
</html>